---
Author: Hywel
layout: post
title: "vim寄存器和系统缓冲区，剪切板"
description: "vim中复制内容保存位置，如何实现vim中复制内容粘贴到外部文件"
date: 星期二, 14. 三月 2017 11:16上午
categories: "Linux"
---
vim中使用`y/d/x`复制剪切的内容，一般情况下，只能在该文件内粘贴(p)。但是我们有时候很需要这部分内容复制到另一个文件，或者外部应用程序中，我们该怎么做呢？  
这里不得不讲讲，vim的复制内容存储位置。   

vim中的复制，删除的内容都会被存放到默认寄存器中，之后可以通过粘贴操作读取默认寄存器的内容。
vim提供的寄存器，内容只对当前vim可见所以你不能够将复制的内容粘贴到该文件以外。  
`ctrl+c,ctrl+v`内容是存放在系统剪切板，可以在全局进行复制粘贴。如何将vim内容复制到外部？或者怎么将外部内容，保证格式情况下粘贴到vim中呢？请看下方分解。

> vim下可以通过`:reg`查看当前寄存器内容

## 寄存器
vim中有多个寄存器，常用的如下：
### 1. `""` : 匿名寄存器
保存最近一次复制或者删除的内容
### 2. `"0-"9`：编号寄存器  
其中0号寄存器保存最近一次复制(y)内容。
1-9号寄存器保存最近9次的**行**删除内容。`"1`是最近一次删除,1-9依次往后推，`"9`是前推到第9次删除的内容
### 3. `"a-"z`或`"A-"Z`：字母寄存器
给用户使用的指定寄存器，例如：用户可以在normal模式下通过`"a3yy`来将三行内容复制到`a`寄存器，然后在normal模式下输入`"ap`来将这a寄存器中的这三行内容进行粘贴。
当然对于`dd`这种命令也可以将删除内容指定到字母寄存器，如：`"Bdd`将该行删除内容添加到B寄存器，当然vim字母寄存器中，不区分大小写，所以`"bdd`与`"Bdd`会达成一样的效果
### 4. `"-`：小寄存器
如果你删除的只是一个单词或字母： `dw`或者`x`，那么这个单词并不会保存在`"1`这样的数字寄存器中，而是保存在`"-`寄存器里面。所有不包含换行符的删除都会保存在此寄存器中
### 5. `"%`：当前文件名寄存器
保存当前的文件名

## 缓冲区和剪切板
### `"+`：关联系统剪切板
这里的内容将可以被vim外部所使用，相当于Windows下的`ctrl+c`。所以vim中需要在外部粘贴的数据，请使用系统剪切板来保存。

### `"*`：关联系统缓存区
缓存区与剪切板区别：缓存区是实时的，当使用鼠标或键盘选择内容时，内容就已经在缓冲区了。而剪切板需要`ctrl+c`等命令复制后，才会将内容存进去

> 若寄存器列表里无`"*` 或 `"+` 寄存器，则可能是由于没有安装vim的图形界面所致。Debian/Ubuntu下可以通过安装vim-gnome解决。  

> $ sudo apt-get install vim-gnome

## vim中粘贴与自动缩进
是不是经常遇到在vim中粘贴代码后，代码格式凌乱的情况？
有下面三个方式可以解决：
1. 使用`:set paste`模式  
开启paste模式后，autoindent等缩进功能将会被屏蔽，粘贴格式就会不受影响。结束后使用`:set nopaste`恢复非粘贴模式。  
每次手工开启关闭paste模式将会比较麻烦，可以在`._vimrc`中为其设置一个快捷键，每次需要时按一下即可切换`：set pastetoggle=<f12>`
2. 使用系统剪切板，普通模式下`"+p`命令
3. 插入模式输入`<C-r><C-p>"+`
4. 使用缓冲区  
选择文本内容,vim普通模式下按 `"*p` 将选择缓冲区中内容粘贴进来

